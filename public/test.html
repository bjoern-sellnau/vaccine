<!DOCTYPE html>
<html>
  <head>
    <title>Vaccine.js</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:800" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/easydemo.css">
    <link rel="stylesheet" type="text/css" href="/styles.css">
  </head>
  <body>
    <div id="dim-background"></div>
    <a style="position: absolute; left: -12px; top: -12px; border: 0;" href="https://github.com/jakesandlund/vaccine"><img src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a>
    <header><h1 class="structure">Vaccine.js</h1></header>
    <div id="sizes-container">
      <div id="sizes" class="structure">
        <div class="shot-container">
          <img class="shot" src="/shot.png" alt="Vaccine shot">
          <div class="shot current"></div>
          <div class="shot saved"></div>
        </div>
        <div class="info">
        </div>
      </div>
    </div>
    <div id="base" class="structure">
      <div id="config" class="configuration">
        <div class="divider">
          <h3>Project Settings</h3>
        </div>
        <div id="format" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Module Format <span class="hint">(set first)</span></div>
          <div class="inputs">
            <div id="amd" class="format-picker"><input type="button" value="AMD"></div>
            <div id="commonjs" class="format-picker"><input type="button" value="CommonJS"></div>
            <div id="umd" class="format-picker"><input type="button" value="UMD"></div>
            <input type="hidden" name="format">
          </div>
        </div>
        <div id="supports" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Support <span class="hint">these environments</span></div>
          <div class="inputs">
            <label><input type="checkbox" name="supports" value="window">Global (window)</label>
            <label><input type="checkbox" name="supports" value="amd">AMD</label>
            <label><input type="checkbox" name="supports" value="commonjs">CommonJS</label>
          </div>
        </div>
        <div class="group" id="variables">
          <div class="open-help"><div>?</div></div>
          <div class="title">Project Variables</div>
          <div class="inputs">
            <label>Name<input type="text" name="name"></label>
            <label>Dependencies<input type="text" name="dependencies"></label>
            <label id="entry-file">Main (entry file)<input type="text" name="main"></label>
          </div>
        </div>
        <div class="divider">
          <h3>Optimizations</h3>
        </div>
        <div id="require" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Require <span class="hint">other modules</span></div>
          <div class="inputs">
            <label><input type="checkbox" name="require" value="full">full relative</label>
            <label><input type="checkbox" name="require" value="single">single relative ("./module")</label>
            <label id="absolute-id"><input type="checkbox" name="require" value="absolute">absolute id ("my_lib/module")</label>
            <label id="w-o-index"><input type="checkbox" name="require" value="index">w/o index ("pkg/index" -&gt; "pkg")</label>
          </div>
        </div>
        <div id="exports" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Export <span class="hint">a module's API</span></div>
          <div class="inputs">
            <label><input type="checkbox" name="exports" value="exports">exports</label>
            <label><input type="checkbox" name="exports" value="module">module.exports</label>
            <label id="export-return"><input type="checkbox" name="exports" value="return">return</label>
          </div>
        </div>
        <div id="define" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Define <span class="hint">an AMD module</span></div>
          <div class="inputs">
            <label><input type="checkbox" name="define" value="optional_id">optional id ("define(id?, ...)")</label>
            <label><input type="checkbox" name="define" value="array" disabled="disabled">array ("define([requires], ...)")</label>
          </div>
        </div>
        <div class="divider">
          <h3>Miscellaneous</h3>
        </div>
        <div id="debugging" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Debugging</div>
          <div class="inputs">
            <label><input type="checkbox" name="debugging" value="debug">debug</label>
            <label><input type="checkbox" name="debugging" value="performance">performance</label>
            <label><input type="checkbox" name="debugging" value="use_strict">"use strict";</label>
          </div>
        </div>
        <div id="variable-overrides" class="group">
          <div class="open-help"><div>?</div></div>
          <div class="title">Variable Overrides</div>
          <div class="inputs">
            <label id="source-directory">Source directory<input type="text" name="src"></label>
            <label>Global variable name<input type="text" name="global"></label>
          </div>
        </div>
        <div class="group">
          <div class="title">*Note</div>
          <div class="inputs">Gzipped size calculated by gzipping various
            vaccine.js versions with a 4.8k sized library.</div>
        </div>
      </div>


      <div id="help-document">
        <div class="close">&times;</div>
        <h2>Vaccine.js - Help - <input id="show-demo" type="button" value="Show Demo"></h2>
        <div class="content">

<div id="h-start" class="help-section">
  <div class="title">Help Start</div>
  A good introduction to Vaccine is the demo. Click the above button to see it.
</div>
<div class="divider">
  <h3>Project Settings</h3>
</div>
<div id="h-format" class="help-section">
  <div class="title">Module Format</div>
  To use Vaccine, the JavaScript files must be written in one of the following
  three module formats. Click the links for more info about each format. Set
  the module format before any other options are set, since it will hide
  options that don't work with the chosen format. Clicking the buttons will
  also set all options back to the default.
  <ul>
    <li><span class="key"><a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a></span>
    - AMD requires a build step with <code>sh build.sh &gt; library.js</code>.
    An AMD module is written with a call to <code>define</code>. Currently, the
    supported method signature is <code>define(id?, factory)</code>. The
    factory parameters are <code>factory(require, exports?, module?)</code>
    with the last two depending on the <a href="#help-exports">exports</a>
    configuration.</li>

    <li><span class="key"><a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a></span>
    - CommonJS requires a build step with <code>sh build.sh &gt; library.js</code>.
    The format is very similar to the inside of the <code>factory</code> of an
    AMD module. There are three free variables: <code>require, exports, and
    module</code>.
    </li>

    <li><span class="key"><a href="https://github.com/umdjs/umd">UMD</a></span>
    - UMD is a pattern for a single file to support multiple environments, such
    as CommonJS, AMD, or a regular browser global. It does not need a build.
    </li>
</div>
<div id="h-supports" class="help-section">
  <div class="title">Environments Supported</div>
  These options determine what environments the project will be used in.
  Some formats cannot work in some environments, so they will be marked in red.
  <ul>
    <li><span class="key">Global (window)</span> - This is the standard method
    of creating a single global variable for a library (or application). Then,
    any code that uses this library will have access via the global
    variable.</li>
    <li><span class="key">AMD</span> - This option means that the library will
    work in any application that uses an AMD module loader, such as RequireJS.
    That is, this option adds a <code>define('library_name', factory)</code> if
    AMD is detected.</li>
    <li><span class="key">CommonJS</span> - This option means that the project
    will support CommonJS environments, such as
    <a href="http://nodejs.org">Node.js</a>.</li>
  </ul>
</div>
<div id="h-variables" class="help-section">
  <div class="title">Project Variables</div>
  These variables are used to configure the shim to work for the project.
  <ul>
    <li><span class="key">Name</span> - The name of the project. The global
    variable as well as the AMD module id will be set to this.</li>
    <li><span class="key">Dependencies</span> - The names of the library's
    dependencies. This will be used if supporting an AMD environment, with the
    <code>define</code> call.</li>
    <li><span class="key">Main (entry file)</span> - The relative path of the
    main file from the project's root directory. For built libraries (AMD,
    CommonJS), all the source files must be in a separate directory with only
    sources. This source directory is extracted from the path to the main file,
    but can be overwritten with a
    <a href="#help-variable-overrides">variable override</a>.</li>
</div>
<div class="divider">
  <h3>Optimizations</h3>
</div>
<div id="h-require" class="help-section">
  <div class="title">Require</div>
</div>
<div id="h-exports" class="help-section">
  <div class="title">Exports</div>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce placerat dui interdum elit ullamcorper id placerat lorem dignissim. Vivamus quis sodales erat. Curabitur non sapien ipsum. Suspendisse ipsum felis, volutpat in faucibus non, pulvinar vehicula erat. Integer non felis lectus. Etiam quis massa quis quam suscipit interdum. Nunc id ante et urna ullamcorper malesuada non quis lorem. Fusce vitae justo sed metus tristique ornare. Suspendisse potenti. Donec dictum velit felis. Mauris rutrum, purus ut interdum pharetra, neque urna egestas dui, vel viverra lacus lacus ac leo. Sed sit amet dolor et quam ullamcorper consectetur. Etiam convallis molestie libero, lobortis posuere nibh ornare quis. Phasellus aliquam arcu lobortis urna sollicitudin volutpat.

  Nunc consectetur commodo odio quis imperdiet. Donec et pharetra odio. Vivamus lacus libero, tincidunt et gravida at, feugiat et orci. Sed nec tempus justo. Vivamus congue enim vel risus pellentesque molestie. Nam eu nibh vel magna feugiat consectetur. Praesent dignissim accumsan lacinia. Aenean non tincidunt velit.
</div>
<div id="h-define" class="help-section">
  <div class="title">Define</div>
</div>
<div class="divider">
  <h3>Miscellaneous</h3>
</div>
<div id="h-debugging" class="help-section">
  <div class="title">Debugging</div>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce placerat dui interdum elit ullamcorper id placerat lorem dignissim. Vivamus quis sodales erat. Curabitur non sapien ipsum. Suspendisse ipsum felis, volutpat in faucibus non, pulvinar vehicula erat. Integer non felis lectus. Etiam quis massa quis quam suscipit interdum. Nunc id ante et urna ullamcorper malesuada non quis lorem. Fusce vitae justo sed metus tristique ornare. Suspendisse potenti. Donec dictum velit felis. Mauris rutrum, purus ut interdum pharetra, neque urna egestas dui, vel viverra lacus lacus ac leo. Sed sit amet dolor et quam ullamcorper consectetur. Etiam convallis molestie libero, lobortis posuere nibh ornare quis. Phasellus aliquam arcu lobortis urna sollicitudin volutpat.

  Nunc consectetur commodo odio quis imperdiet. Donec et pharetra odio. Vivamus lacus libero, tincidunt et gravida at, feugiat et orci. Sed nec tempus justo. Vivamus congue enim vel risus pellentesque molestie. Nam eu nibh vel magna feugiat consectetur. Praesent dignissim accumsan lacinia. Aenean non tincidunt velit.
</div>
<div id="h-variable-overrides" class="help-section">
  <div class="title">Variable Overrides</div>
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce placerat dui interdum elit ullamcorper id placerat lorem dignissim. Vivamus quis sodales erat. Curabitur non sapien ipsum. Suspendisse ipsum felis, volutpat in faucibus non, pulvinar vehicula erat. Integer non felis lectus. Etiam quis massa quis quam suscipit interdum. Nunc id ante et urna ullamcorper malesuada non quis lorem. Fusce vitae justo sed metus tristique ornare. Suspendisse potenti. Donec dictum velit felis. Mauris rutrum, purus ut interdum pharetra, neque urna egestas dui, vel viverra lacus lacus ac leo. Sed sit amet dolor et quam ullamcorper consectetur. Etiam convallis molestie libero, lobortis posuere nibh ornare quis. Phasellus aliquam arcu lobortis urna sollicitudin volutpat.

  Nunc consectetur commodo odio quis imperdiet. Donec et pharetra odio. Vivamus lacus libero, tincidunt et gravida at, feugiat et orci. Sed nec tempus justo. Vivamus congue enim vel risus pellentesque molestie. Nam eu nibh vel magna feugiat consectetur. Praesent dignissim accumsan lacinia. Aenean non tincidunt velit.
</div>


        </div>
      </div>


      <div id="demo-text">


<p>Vaccine lets JavaScript libraries use a
<a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a>
(<a href="http://nodejs.org/api/modules.html">Node.js</a>) or
<a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD</a> module format and
work in the browser. It works by generating small shims that won't bloat the
library's size. It is similar to
<a href="https://github.com/sstephenson/stitch">Stitch</a>, or a subset of
<a href="https://github.com/substack/node-browserify">Browserify</a> and
<a href="https://github.com/jrburke/almond">Almond</a>, except that Vaccine
is configurable.</p>

<p>Configurability enables the shims to be <signal>small</signal> by including
only the required functionality. While Vaccine works for applications, its
small size is most important to libraries.</p>

<p>Larger projects may not be as concerned about size, but
instead need more functionality.</p>

<p>The canonical example of reducing size via configuration is for projects
that have only one directory of source files (no subdirectories). Having one
level of sources simplifies the require implementation considerably.</p>

<p>To use Vaccine, first set the options in the <signal>left panel</signal>.
The <signal>shim</signal> will <strong>instantly adjust</strong> to
changes.</p>

<p>All options can be selected in any combination. However, certain
combinations of options do not work, and are marked in red. A <signal>fix
it</signal> link can be used to correct the problem.</p>

<p>Set the project's <signal>module format</signal> and then choose what
environments the project will <signal>support</signal>.</p>

<p>Enter your project's <signal>name</signal>, <signal>main file</signal>,
and <signal>dependencies</signal> to make the shim work for your project.</p>

<p><signal>Optimize</signal> the shim size by checking only the necessary
functionality.</p>

<p>Use the <signal>diff button</signal> to compare between the current
and <signal>saved</signal> configuration. The <signal>size</signal> shows
the amount added or removed.</p>

<p>
After setting the options as desired, copy <signal>vaccine.js</signal> and
<signal>build.sh</signal> to your project's root directory. When you are ready to
build, run <code>sh build.sh &gt; my_built_file.js</code>. Note that all
source code, and only source code, must be in a separate directory for the
tiny build script to work.</p>

<p>Use the <a href="https://github.com/umdjs/umd">UMD</a> <signal>format</signal>
for single file projects&mdash;no build required.</p>

<p>For development, the <signal>vaccine_dev.js</signal> version can be placed
before script tags for all the modules (in any order). Call
<code>requireDev()</code> to get the project's global.</p>

<p>The name "vaccine" comes from the analogy that the shims are injected into
the code like the virus used in a vaccine, and that they are
a temporary treatment until the
<a href="http://wiki.ecmascript.org/doku.php?id=harmony:modules">Harmony modules</a>
"cure" arrives.
</p>

<p>For help with any of the options, and for other info, click on the
<signal>question mark</signal> icons to display the help.</p>
      </div>
      <div id="main">
        <div class="configuration">
          <div id="controls">
            <input id="save" type="button" value="Save">
            <input id="swap" type="button" value="Swap">
            <div class="button" id="diff"><em>Diff</em> with saved</div>
          </div>
          <div id="targets" class="group">
            <div class="inputs">
              <label class="target-non-umd"><input type="checkbox" name="targets" value="vaccine.js">vaccine.js</label>
              <label id="target-umd"><input type="checkbox" name="targets" value="umd.js">umd.js</label>
              <label class="target-non-umd"><input type="checkbox" name="targets" value="build.sh">build.sh</label>
              <label class="target-non-umd"><input type="checkbox" name="targets" value="vaccine_dev.js">vaccine_dev.js</label>
              <label class="target-non-umd"><input type="checkbox" name="targets" value="dev_server.js">dev_server.js</label>
              <label class="target-non-umd"><input type="checkbox" name="targets" value="Makefile">Makefile</label>
            </div>
            <div class="title"></div>
          </div>
        </div>
        <div id="sources"></div>
      </div>
    </div>
    <div class="clear"></div>
    <footer>Copyright 2012 <a href="http://jakesandlund.com">Jake Sandlund</a></footer>

    <script src="/d3.js"></script>

    <!-- DEVELOPMENT -->
    <script src="/vaccine_dev.js"></script>
    <script src="/src/consolidator.js"></script>
    <script src="/src/demo.js"></script>
    <script src="/src/easydemo.js"></script>
    <script src="/src/hijs.js"></script>
    <script src="/src/jsdiff.js"></script>
    <script src="/src/parse-js.js"></script>
    <script src="/src/process.js"></script>
    <script src="/src/templates.js"></script>
    <script src="/src/uglify-js.js"></script>
    <script src="/src/vaccine.js"></script>
    <script src="/src/web.js"></script>
    <script>requireDev();</script>
    <!-- /DEVELOPMENT -->
    <!-- PRODUCTION -->

  </body>
</html>
